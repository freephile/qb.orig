{
  "name": "QB",
  "tagline": "Quality Box",
  "body": "Quality Box\r\n=======================\r\n\r\nThe QualityBox is a complete solution for hosting a MediaWiki installation similar to what is used to run Wikipedia. There are other options like `sudo apt-get install mediawiki` but that is just a starting point whereas QualityBox is the full endpoint. By leveraging the Ansible orchestration tool, QualityBox allows you to provision virtual machines locally (using Vagrant + VirtualBox) or in the cloud (e.g. Digital Ocean droplets).  Whereas options like MediaWiki-Vagrant will allow you to quickly build a development instance, the Quality Box is optimized for production hosting of MediaWiki.  For MediaWiki consultants, this turbo-charges your DevOps and Delivery.  For organizations wishing to deploy MediaWiki, this eliminates the many hurdles along the way and opens up the pathway to better support by the same people and organizations that develop QualityBox.\r\n\r\nContents\r\n------------\r\n\r\nThere are playbooks that will allow you to\r\n* Launch a droplet\r\n* Destroy droplet\r\n* Provision the machine\r\n\r\n\r\nInstallation\r\n------------\r\n\r\n* Install [Vagrant](https://www.vagrantup.com/)\r\n* Optionally Install [VirtualBox](https://www.virtualbox.org/) if you want a GUI for your local virtual machine\r\n* Install [Ansible 2.0](http://docs.ansible.com/ansible/intro_installation.html)\r\n* Make sure your python path is configured correctly. For example:\r\n\r\n```\r\n    # On Ubuntu\r\n    export PYTHONPATH=/usr/local/lib/python2.7/site-packages\r\n    # On OS X\r\n    export PYTHONPATH=/Library/Python/2.7/site-packages\r\n```\r\n\r\n* Copy vars.yml.dist to vars.yml and change the variables to your need.\r\n\r\nLocal Development\r\n-----------------\r\n\r\n* Change to the directory where you cloned this repo\r\n* Issue a 'vagrant up'\r\n* 'vagrant ssh' to get into the virtual machine\r\n\r\nDigital Ocean configuration\r\n---------------------------\r\n\r\nCreate a new API key on the [API access page](https://cloud.digitalocean.com/api_access). \r\nAdd the api_token to `vars.yml`.\r\n\r\n\r\nPlaybooks\r\n=========\r\n\r\nlaunch.yml\r\n----------\r\n\r\nLaunch and provision a new server on Digital Ocean.\r\n\r\n```\r\n    ansible-playbook -i hosts launch.yml\r\n```\r\n\r\nWhat this Playbook do for you?\r\n\r\n- configure swap file\r\n- install ufw, fail2ban\r\n- configure ufw allow ports for SSH\r\n- make sshd more secure: \r\n  - PermitRootLogin=no\r\n  - PasswordAuthentication=no\r\n  - AllowGroups=sudo\r\n- config sudoers\r\n- A WHOLE LOT MORE that needs to be documented\r\n\r\ndestroy.yml\r\n-----------\r\n\r\nDestroys a server on Digital Ocean.\r\n\r\n```\r\n    ansible-playbook -i hosts destroy.yml\r\n```\r\n\r\nprovision.yml\r\n-------------\r\n\r\nOnce you have an inventory file (mv hosts.example hosts and edit to your liking), you can use the provision.yml to roll out all the features of Quality Box\r\n\r\n```\r\n    ansible-playbook provision.yml --extra-vars 'wiki_hostname=wiki.example.com apache_user=www-data'\r\n```\r\n\r\n\r\nensure_python.yml\r\n-----------------\r\n\r\n(do not use) For 16.04 support which comes with Python 3 by default while Ansible requires Python 2\r\n\r\n\r\nKnown issues\r\n------------\r\n\r\n* dopy 0.3.7 is broken (error \"name 'DoError' is not defined\").\r\n  Downgrade use version 0.3.5 using `pip install dopy==0.3.5`.\r\n\r\n* digital_ocean_domain is broken (error \"'Domain' object has no attribute 'id'\") when you run the plabook the second time.\r\n  Keep the \"DNS name\" empty to avoid this error.",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}